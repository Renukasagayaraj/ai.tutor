import { Link } from "react-router-dom";
import { ModeToggle } from "./mode-toggle";
import { buttonVariants } from "./ui/button";
import { cn } from "@/lib/utils";
import { useAuthStore } from "@/hooks/auth";
import HeaderPopover from "./headerpopover";

export default function Header() {
  const { auth } = useAuthStore();

  return (
    <header className="flex sticky top-0 z-10  items-center justify-between p-4 border-b border-muted shadow-sm backdrop-blur bg-background/80">
      <div>
        <Link to="/">
          <Logo />
        </Link>
      </div>
      <div className="flex items-center gap-4">
        {!auth.isAthenticated && (
          <Link
            to="/login"
            className={cn(buttonVariants({ variant: "default" }))}
          >
            Login
          </Link>
        )}
        <ModeToggle />
        {auth.isAthenticated && <HeaderPopover />}
      </div>
    </header>
  );
}

function Logo() {
  return (
    <svg
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      height="90.000000pt"
      viewBox="0 0 359.000000 90.000000"
      className="fill-foreground h-10"
      preserveAspectRatio="xMidYMid meet"
    >
      <g
        transform="translate(0.000000,90.000000) scale(0.100000,-0.100000)"
        stroke="none"
      >
        <path
          d="M377 690 c-14 -11 -28 -34 -32 -50 -6 -27 -11 -30 -45 -30 -36 0 -38
-2 -43 -37 -4 -21 -12 -110 -18 -197 l-12 -160 27 -23 c25 -21 37 -23 132 -23
63 0 104 4 104 10 0 6 -40 10 -101 10 -135 0 -139 3 -138 93 0 40 6 124 12
187 l12 115 33 3 c30 3 32 1 32 -27 0 -17 5 -31 10 -31 6 0 10 14 10 30 l0 30
84 0 85 0 4 -32 4 -33 1 33 c2 30 5 32 37 32 34 0 35 -1 35 -37 0 -55 11 -113
21 -113 5 0 7 17 4 38 -2 20 -7 58 -10 85 l-6 47 -40 0 c-34 0 -39 3 -39 22 0
12 -12 35 -27 50 -34 35 -97 39 -136 8z m117 -12 c13 -13 27 -33 31 -45 6 -23
5 -23 -84 -23 l-90 0 11 30 c20 60 86 79 132 38z"
        />
        <path
          d="M880 470 l0 -140 30 0 c30 0 30 1 30 53 0 60 10 80 36 75 16 -3 20
-14 22 -66 3 -61 3 -62 32 -62 l30 0 0 75 c0 69 -2 76 -26 91 -20 14 -32 15
-60 6 l-34 -10 0 59 c0 59 0 59 -30 59 l-30 0 0 -140z"
        />
        <path
          d="M1330 471 l0 -138 66 -7 c52 -5 71 -3 91 9 80 53 35 184 -59 172
l-38 -5 0 54 c0 53 0 54 -30 54 l-30 0 0 -139z m126 -32 c19 -22 13 -43 -18
-63 -34 -21 -66 42 -36 72 17 17 32 15 54 -9z"
        />
        <path
          d="M1560 470 l0 -141 38 1 c20 0 52 -2 70 -6 42 -8 77 14 92 61 10 30 9
41 -7 73 -22 45 -60 61 -103 45 l-30 -11 0 59 c0 59 0 59 -30 59 l-30 0 0
-140z m128 -22 c25 -25 4 -78 -32 -78 -10 0 -36 32 -36 45 0 17 27 45 44 45 6
0 17 -5 24 -12z"
        />
        <path d="M1800 470 l0 -140 30 0 30 0 0 140 0 140 -30 0 -30 0 0 -140z" />
        <path
          d="M2290 470 l0 -140 30 0 c29 0 30 1 30 48 0 59 20 92 47 76 13 -8 19
-26 21 -68 3 -55 3 -56 34 -56 l30 0 -4 75 c-2 41 -9 80 -15 86 -14 14 -70 17
-95 5 -16 -7 -18 -2 -18 53 l0 61 -30 0 -30 0 0 -140z"
        />
        <path
          d="M3320 591 c-7 -15 -6 -23 6 -35 8 -9 17 -16 19 -16 2 0 11 7 19 16
18 18 6 54 -19 54 -8 0 -19 -9 -25 -19z"
        />
        <path
          d="M1100 436 c0 -69 2 -76 26 -95 39 -31 107 -29 139 4 22 21 25 33 25
95 l0 70 -30 0 c-30 0 -30 0 -30 -58 0 -60 -11 -82 -41 -82 -22 0 -29 20 -29
86 0 53 0 54 -30 54 l-30 0 0 -74z"
        />
        <path
          d="M1927 490 c-72 -57 -24 -170 73 -170 39 0 80 26 80 51 0 24 -36 26
-61 3 -22 -20 -59 -10 -59 17 0 17 7 19 64 19 l65 0 -10 33 c-5 17 -18 40 -30
50 -29 23 -90 22 -122 -3z m97 -35 c4 -12 -3 -15 -29 -15 -33 0 -43 8 -28 23
12 13 51 7 57 -8z"
        />
        <path
          d="M2142 490 c-12 -12 -22 -29 -22 -40 0 -21 25 -50 43 -50 7 0 19 -5
27 -10 23 -15 -7 -31 -36 -19 -19 6 -26 4 -34 -11 -22 -41 68 -55 114 -19 39
31 32 68 -17 92 -39 20 -41 42 -1 34 23 -4 40 15 28 34 -10 17 -79 10 -102
-11z"
        />
        <path
          d="M2539 481 c-41 -41 -40 -91 1 -133 28 -28 35 -30 82 -26 55 6 82 27
94 74 23 90 -109 153 -177 85z m99 -33 c24 -24 8 -78 -24 -78 -17 0 -44 28
-44 45 0 17 27 45 44 45 6 0 17 -5 24 -12z"
        />
        <path
          d="M2750 375 l0 -135 30 0 c29 0 30 1 30 50 0 47 1 50 19 40 60 -32 121
11 121 85 0 74 -61 117 -121 85 -13 -7 -19 -7 -19 0 0 5 -13 10 -30 10 l-30 0
0 -135z m128 73 c18 -18 14 -56 -7 -68 -39 -21 -73 19 -51 60 12 22 40 26 58
8z"
        />
        <path
          d="M3099 481 c-38 -39 -39 -87 -3 -130 19 -23 34 -31 58 -31 18 0 36 3
40 7 4 4 23 6 42 4 l34 -3 0 91 c0 90 0 91 -24 91 -14 0 -28 -5 -32 -11 -4 -8
-9 -8 -17 0 -21 21 -67 12 -98 -18z m99 -33 c25 -25 4 -78 -32 -78 -10 0 -36
32 -36 45 0 17 27 45 44 45 6 0 17 -5 24 -12z"
        />
        <path d="M3310 420 l0 -90 35 0 35 0 0 90 0 90 -35 0 -35 0 0 -90z" />
        <path
          d="M592 374 c-16 -11 -22 -25 -22 -51 0 -26 -5 -36 -20 -40 -18 -5 -20
-14 -20 -74 l0 -69 105 0 105 0 0 69 c0 60 -2 69 -20 74 -15 4 -20 14 -20 36
0 59 -59 89 -108 55z m92 -35 c15 -45 3 -59 -54 -59 -50 0 -50 0 -50 33 0 43
17 59 60 55 27 -2 37 -9 44 -29z m36 -124 l0 -55 -90 0 -90 0 0 48 c0 27 3 52
7 55 3 4 44 7 90 7 l83 0 0 -55z"
        />
        <path
          d="M2990 375 c-16 -20 -9 -49 14 -53 27 -6 48 25 35 49 -12 23 -32 24
-49 4z"
        />
      </g>
    </svg>
  );
}
