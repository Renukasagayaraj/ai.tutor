import { Link } from "react-router-dom";
import { ModeToggle } from "./mode-toggle";
import { buttonVariants } from "./ui/button";
import { cn } from "@/lib/utils";
import { useAuthStore } from "@/hooks/auth";
import HeaderPopover from "./headerpopover";

export default function Header() {
  const { auth } = useAuthStore();

  return (
    <header className="flex sticky top-0 z-10  items-center justify-between p-4 border-b border-muted shadow-sm backdrop-blur bg-background/80">
      <div>
        <Link to="/">
          <Logo />
        </Link>
      </div>
      <div className="flex items-center gap-4">
        {!auth.isAthenticated && (
          <Link
            to="/login"
            className={cn(buttonVariants({ variant: "default" }))}
          >
            Login
          </Link>
        )}
        <ModeToggle />
        {auth.isAthenticated && <HeaderPopover />}
      </div>
    </header>
  );
}

function Logo() {
  return (
    <svg
      width="216"
      height="58"
      viewBox="0 0 216 58"
      fill="none"
      className="fill-foreground h-10"
      xmlns="http://www.w3.org/2000/svg">
      <path d="M15 2.09541C13.6 3.19541 12.2 5.49541 11.8 7.09541C11.2 9.79541 10.7 10.0954 7.3 10.0954C3.7 10.0954 3.5 10.2954 3 13.7954C2.6 15.8954 1.8 24.7954 1.2 33.4954L0 49.4954L2.7 51.7954C5.2 53.8954 6.4 54.0954 15.9 54.0954C22.2 54.0954 26.3 53.6954 26.3 53.0954C26.3 52.4954 22.3 52.0954 16.2 52.0954C2.7 52.0954 2.3 51.7954 2.4 42.7954C2.4 38.7954 3 30.3954 3.6 24.0954L4.8 12.5954L8.1 12.2954C11.1 11.9954 11.3 12.1954 11.3 14.9954C11.3 16.6954 11.8 18.0954 12.3 18.0954C12.9 18.0954 13.3 16.6954 13.3 15.0954V12.0954H21.7H30.2L30.6 15.2954L31 18.5954L31.1 15.2954C31.3 12.2954 31.6 12.0954 34.8 12.0954C38.2 12.0954 38.3 12.1954 38.3 15.7954C38.3 21.2954 39.4 27.0954 40.4 27.0954C40.9 27.0954 41.1 25.3954 40.8 23.2954C40.6 21.2954 40.1 17.4954 39.8 14.7954L39.2 10.0954H35.2C31.8 10.0954 31.3 9.79541 31.3 7.89541C31.3 6.69541 30.1 4.39541 28.6 2.89541C25.2 -0.604588 18.9 -1.00459 15 2.09541ZM26.7 3.29541C28 4.59541 29.4 6.59541 29.8 7.79541C30.4 10.0954 30.3 10.0954 21.4 10.0954H12.4L13.5 7.09541C15.5 1.09541 22.1 -0.804588 26.7 3.29541Z" fill="currentColor" />
      <path d="M88.7369 8.9954C88.0369 10.4954 88.1369 11.2954 89.3369 12.4954C90.1369 13.3954 91.0369 14.0954 91.2369 14.0954C91.4369 14.0954 92.3369 13.3954 93.1369 12.4954C94.9369 10.6954 93.7369 7.0954 91.2369 7.0954C90.4369 7.0954 89.3369 7.9954 88.7369 8.9954Z" fill="currentColor" />
      <path d="M127 27.9719C127 34.4727 127.2 35.1322 129.6 36.9223C133.5 39.843 140.3 39.6545 143.5 36.5454C145.7 34.5669 146 33.4364 146 27.595V21H143C140 21 140 21 140 26.4645C140 32.1174 138.9 34.1901 135.9 34.1901C133.7 34.1901 133 32.3058 133 26.0876C133 21.0942 133 21 130 21H127V27.9719Z" fill="currentColor" />
      <path d="M175.027 22.8768C170.925 26.9938 171.025 32.0145 175.127 36.2319C177.928 39.0435 178.628 39.2443 183.33 38.8427C188.833 38.2402 191.534 36.1315 192.734 31.412C195.035 22.3747 181.83 16.0487 175.027 22.8768ZM184.931 26.1905C187.332 28.6004 185.731 34.0228 182.53 34.0228C180.829 34.0228 178.128 31.2112 178.128 29.5042C178.128 27.7971 180.829 24.9855 182.53 24.9855C183.13 24.9855 184.231 25.4876 184.931 26.1905Z" fill="currentColor" />
      <path d="M67.227 23.0399C63.427 26.9399 63.327 31.7399 66.927 36.0399C68.827 38.3399 70.327 39.1399 72.727 39.1399C74.527 39.1399 76.327 38.8399 76.727 38.4399C77.127 38.0399 79.027 37.8399 80.927 38.0399L84.327 38.3399V29.2399C84.327 20.2399 84.327 20.1399 81.927 20.1399C80.527 20.1399 79.127 20.6399 78.727 21.2399C78.327 22.0399 77.827 22.0399 77.027 21.2399C74.927 19.1399 70.327 20.0399 67.227 23.0399ZM77.127 26.3399C79.627 28.8399 77.527 34.1399 73.927 34.1399C72.927 34.1399 70.327 30.9399 70.327 29.6399C70.327 27.9399 73.027 25.1399 74.727 25.1399C75.327 25.1399 76.427 25.6399 77.127 26.3399Z" fill="currentColor" />
      <path d="M88 30V39H91.5H95V30V21H91.5H88V30Z" fill="currentColor" />
      <path d="M36.5 33.6954C34.9 34.7954 34.3 36.1954 34.3 38.7954C34.3 41.3954 33.8 42.3954 32.3 42.7954C30.5 43.2954 30.3 44.1954 30.3 50.1954V57.0954H40.8H51.3V50.1954C51.3 44.1954 51.1 43.2954 49.3 42.7954C47.8 42.3954 47.3 41.3954 47.3 39.1954C47.3 33.2954 41.4 30.2954 36.5 33.6954ZM45.7 37.1954C47.2 41.6954 46 43.0954 40.3 43.0954C35.3 43.0954 35.3 43.0954 35.3 39.7954C35.3 35.4954 37 33.8954 41.3 34.2954C44 34.4954 45 35.1954 45.7 37.1954ZM49.3 49.5954V55.0954H40.3H31.3V50.2954C31.3 47.5954 31.6 45.0954 32 44.7954C32.3 44.3954 36.4 44.0954 41 44.0954H49.3V49.5954Z" fill="currentColor" />
      <path d="M100.167 30.5134C98.5668 32.5134 99.2668 35.4134 101.567 35.8134C104.267 36.4134 106.367 33.3134 105.067 30.9134C103.867 28.6134 101.867 28.5134 100.167 30.5134Z" fill="currentColor" />
      <path d="M196 39V21.2542H204.014V24.2118H204.379C205.018 23.1874 206.114 22.3979 207.667 21.8434C209.234 21.2811 211.023 21 213.032 21C213.489 21 213.998 21.0116 214.562 21.0347C215.14 21.0501 215.619 21.077 216 21.1155V24.9628C215.65 24.9012 215.094 24.8472 214.333 24.801C213.588 24.7471 212.865 24.7202 212.164 24.7202C210.658 24.7202 209.303 24.8858 208.1 25.2169C206.913 25.5404 205.977 25.991 205.292 26.5687C204.607 27.1463 204.265 27.8126 204.265 28.5674V39H196Z" fill="currentColor" />
      <path d="M123.385 23.6316V26.3948H104V23.6316H123.385ZM108.786 20H116.733V34.2303C116.733 34.7106 116.894 35.079 117.216 35.3356C117.553 35.5856 117.992 35.7566 118.533 35.8487C119.075 35.9408 119.675 35.9869 120.334 35.9869C120.831 35.9869 121.285 35.9704 121.695 35.9376C122.119 35.9047 122.441 35.8751 122.661 35.8487L124 38.6415C123.576 38.7073 122.968 38.7797 122.178 38.8586C121.402 38.9376 120.451 38.9836 119.324 38.9968C117.333 39.0231 115.54 38.8882 113.945 38.5922C112.35 38.2895 111.084 37.8224 110.147 37.1908C109.225 36.5593 108.771 35.7698 108.786 34.8224V20Z" fill="currentColor" />
      <path d="M168.385 23.6316V26.3948H149V23.6316H168.385ZM153.786 20H161.733V34.2303C161.733 34.7106 161.894 35.079 162.216 35.3356C162.553 35.5856 162.992 35.7566 163.533 35.8487C164.075 35.9408 164.675 35.9869 165.334 35.9869C165.831 35.9869 166.285 35.9704 166.695 35.9376C167.119 35.9047 167.441 35.8751 167.661 35.8487L169 38.6415C168.576 38.7073 167.968 38.7797 167.178 38.8586C166.402 38.9376 165.451 38.9836 164.324 38.9968C162.333 39.0231 160.54 38.8882 158.945 38.5922C157.35 38.2895 156.084 37.8224 155.147 37.1908C154.225 36.5593 153.771 35.7698 153.786 34.8224V20Z" fill="currentColor" />
    </svg>
  );
}
